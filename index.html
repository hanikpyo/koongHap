<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>한잎 궁합</title>
        <link rel="stylesheet" href="style.css" />

        <meta name="naver-site-verification" content="088dc4820b98a1ac514fc0ab52a825637a7ebf35" />
        <link rel="canonical" href="http://hanipanimal.netlify.app" />
        <meta name="description" content="AI가 판별해주는 궁합" />
        <meta property="og:type" content="website" />
        <meta property="og:title" content="한잎 궁합" />
        <meta property="og:description" content="AI 궁합" />
        <meta property="og:image" content="https://hanipkoonghap.netlify.app/img/leaf.png" />
        <meta property="og:url" content="https://hanipkoonghap.netlify.app/" />
        <script src="https://use.fontawesome.com/releases/v5.2.0/js/all.js"></script>
        <meta name="naver-site-verification" content="088dc4820b98a1ac514fc0ab52a825637a7ebf35" />
    </head>
    <body>
        <header class="header">
            <div class="header-logo">
                <a href="index.html"> <img src="img/leaf.png" class="logo-img" /></a>
            </div>
            <div class="header-title">
                궁합 테스트
            </div>
        </header>
        <div class="description">
            인공지능이 알려주는 관상으로 본 궁합지수입니다.
            <div class="subdescr">
                사진을 업로드 하시면 인공지능이 궁합지수를 알려드립니다
            </div>
            <div class="warning">
                (업로드 하신 사진은 어떠한 경우로도 저장되거나 수집되지 않습니다.)
            </div>
        </div>
        <script
            class="jsbin"
            src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"
        ></script>
        <div class="file-upload-flex">
            <div class="file-upload-title">
                <span id="gender" class="gender-f" style="color: tomato;">
                    여자
                </span>
                <span></span>
                <span id="gender" class="gender-m" style="color: cornflowerblue;">
                    남자
                </span>
            </div>
            <div class="file-upload">
                <div class="image-upload-wrap-f">
                    <input
                        class="file-upload-input-f"
                        type="file"
                        onchange="readURL(this);"
                        accept="image/*"
                    />
                    <div class="drag-text">
                        <img src="img/upload.png" class="upload" />
                    </div>
                </div>
                <div class="file-upload-content-f">
                    <img class="file-upload-image-f" id="face-image-f" src="#" alt="your image" />

                    <div id="label-container"></div>
                </div>
            </div>
            <div class="file-upload-heart">
                <img src="img/heart.png" class="heart" />
            </div>

            <div class="file-upload-sec">
                <div class="image-upload-wrap-m">
                    <input
                        class="file-upload-input-m"
                        type="file"
                        onchange="readURLS(this);"
                        accept="image/*"
                    />
                    <div class="drag-text">
                        <img src="img/upload.png" class="upload" />
                    </div>
                </div>
                <div class="file-upload-content-m">
                    <img class="file-upload-image-m" id="face-image-m" src="#" alt="your image" />

                    <div id="label-container-m"></div>
                </div>
            </div>
            <div id="flex-empty" style="display: none;">
                <span id="f-m-f" style="display: none;"></span>
                <span id="f-m-m" style="display: none;"></span>
            </div>
            <div id="flex-desc"></div>
            <div id="flex-middle">
                <div id="spinner"><i class="fas fa-spinner fa-10x"></i></div>

                <button type="button" onclick="kwansang();" id="koonghap" disabled="disabled">
                    궁합보기!
                </button>
            </div>
            <div id="flex-desckwan"></div>
            <div class="flex-bottom">
                <button type="button" onclick="window.location.reload();" class="remove-image">
                    <span class="try-again">다시 해보기</span>
                </button>
            </div>
            <div class="share">
                <!-- Go to www.addthis.com/dashboard to customize your tools -->
                <div class="addthis_inline_share_toolbox_bqaa"></div>
            </div>
        </div>

        <footer class="footer">
            <div class="coupang">
                <script src="https://ads-partners.coupang.com/g.js"></script>
                <script>
                    new PartnersCoupang.G({ id: 320919 });
                </script>
            </div>

            <div class="coupang-only">
                <script src="https://ads-partners.coupang.com/g.js"></script>
                <script>
                    new PartnersCoupang.G({ id: 320926, subId: null });
                </script>
            </div>
            <div class="coupang-search">
                <iframe
                    src="https://coupa.ng/bJEhEZ"
                    width="430"
                    height="44"
                    frameborder="0"
                    scrolling="no"
                ></iframe>
            </div>
            <div class="footer-ada">
                <ins
                    class="kakao_ad_area"
                    style="display: none;"
                    data-ad-unit="DAN-1ies7vpfypet4"
                    data-ad-width="300"
                    data-ad-height="250"
                ></ins>
                <script
                    type="text/javascript"
                    src="//t1.daumcdn.net/kas/static/ba.min.js"
                    async
                ></script>
            </div>
            <div class="footer-adb">
                <ins
                    class="kakao_ad_area"
                    style="display: none;"
                    data-ad-unit="DAN-1hrbglbtsweuq"
                    data-ad-width="320"
                    data-ad-height="50"
                ></ins>
                <script
                    type="text/javascript"
                    src="//t1.daumcdn.net/kas/static/ba.min.js"
                    async
                ></script>
            </div>
            <div class="footer-adc">
                <ins
                    class="kakao_ad_area"
                    style="display: none;"
                    data-ad-unit="DAN-skyeq1t9ogfl"
                    data-ad-width="320"
                    data-ad-height="100"
                ></ins>
                <script
                    type="text/javascript"
                    src="//t1.daumcdn.net/kas/static/ba.min.js"
                    async
                ></script>
            </div>
            <div class="footer-add">
                <ins
                    class="kakao_ad_area"
                    style="display: none;"
                    data-ad-unit="DAN-1ies7vpfypet4"
                    data-ad-width="300"
                    data-ad-height="250"
                ></ins>
                <script
                    type="text/javascript"
                    src="//t1.daumcdn.net/kas/static/ba.min.js"
                    async
                ></script>
            </div>
        </footer>

        <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
        <script>
            function readURL(input) {
                if (input.files && input.files[0]) {
                    var readers = new FileReader();
                    readers.onload = function (e) {
                        $('.image-upload-wrap-f').hide();
                        $('.file-upload-image-f').attr('src', e.target.result);
                        $('.file-upload-content-f').show();
                        $('.image-title').html(input.files[0].name);
                        $('#spinner').show();
                    };
                    readers.readAsDataURL(input.files[0]);

                    init().then(() => {
                        predict();
                        $('#spinner').hide();
                        goonghap();
                    });
                } else {
                    removeUpload();
                }
            }
            function removeUpload() {
                $('.file-upload-input-f').replaceWith($('.file-upload-input-f').clone());
                $('.file-upload-content-f').hide();
                $('.image-upload-wrap-f').show();
            }
            $('.image-upload-wrap-f').bind('dragover', function () {
                $('.image-upload-wrap-f').addClass('image-dropping');
            });
            $('.image-upload-wrap-f').bind('dragleave', function () {
                $('.image-upload-wrap-f').removeClass('image-dropping');
            });
        </script>
        <script>
            function readURLS(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        $('.image-upload-wrap-m').hide();
                        $('.file-upload-image-m').attr('src', e.target.result);
                        $('.file-upload-content-m').show();
                        $('.image-title').html(input.files[0].name);
                        $('#spinner').show();
                    };
                    reader.readAsDataURL(input.files[0]);

                    onit().then(() => {
                        predicts();
                        $('#spinner').hide();
                        show();
                        $('.remove-image').show();
                    });
                } else {
                    removeUploads();
                }
            }
            function removeUploads() {
                $('.file-upload-input-m').replaceWith($('.file-upload-input-m').clone());
                $('.file-upload-content-m').hide();
                $('.image-upload-wrap-m').show();
            }
            $('.image-upload-wrap-m').bind('dragover', function () {
                $('.image-upload-wrap-m').addClass('image-dropping');
            });
            $('.image-upload-wrap-m').bind('dragleave', function () {
                $('.image-upload-wrap-m').removeClass('image-dropping');
            });
        </script>

        <script type="text/javascript">
            const urlmale = 'https://teachablemachine.withgoogle.com/models/d2ZQoKX34/';

            let modelmale, labelContainermale, maxPredictionsmale;

            // Load the image model and setup the webcam
            async function onit() {
                const modelURLmale = urlmale + 'model.json';
                const metadataURLmale = urlmale + 'metadata.json';

                // load the model and metadata
                // Refer to tmImage.loadFromFiles() in the API to support files from a file picker
                // or files from your local hard drive
                // Note: the pose library adds "tmImage" object to your window (window.tmImage)
                modelmale = await tmImage.load(modelURLmale, metadataURLmale);
                maxPredictionsmale = modelmale.getTotalClasses();
                labelContainermale = document.getElementById('label-container-m');
                for (let i = 0; i < maxPredictionsmale; i++) {
                    var elements = document.createElement('div');
                    elements.classList.add('e-flex');
                    labelContainermale.appendChild(document.createElement('div'));
                }
            }
            // run the webcam image through the image model
            async function predicts() {
                // predict can take in an image, video or canvas html element
                var image = document.getElementById('face-image-m');
                var predictions = await modelmale.predict(image, false);
                predictions.sort((a, b) => parseFloat(b.probability) - parseFloat(a.probability));
                console.log(predictions[0].className);
                document.getElementById('f-m-m').innerHTML = predictions[0].className;
            }

            const URL = 'https://teachablemachine.withgoogle.com/models/JyIpdnoVH/';

            let model, labelContainer, maxPredictions;

            // Load the image model and setup the webcam
            async function init() {
                const modelURL = URL + 'model.json';
                const metadataURL = URL + 'metadata.json';

                // load the model and metadata
                // Refer to tmImage.loadFromFiles() in the API to support files from a file picker
                // or files from your local hard drive
                // Note: the pose library adds "tmImage" object to your window (window.tmImage)
                model = await tmImage.load(modelURL, metadataURL);
                maxPredictions = model.getTotalClasses();
                labelContainer = document.getElementById('label-container');
                for (let i = 0; i < maxPredictions; i++) {
                    var element = document.createElement('div');
                    element.classList.add('d-flex');
                    labelContainer.appendChild(document.createElement('div'));
                }
            }
            // run the webcam image through the image model
            async function predict() {
                // predict can take in an image, video or canvas html element
                var images = document.getElementById('face-image-f');
                var prediction = await model.predict(images, false);
                prediction.sort((a, b) => parseFloat(b.probability) - parseFloat(a.probability));
                console.log(prediction[0].className);
                document.getElementById('f-m-f').innerHTML = prediction[0].className;
            }
            function goonghap() {
                document.getElementById('koonghap').disabled = false;
            }

            function show() {
                $('#koonghap').show();
            }

            function kwansang() {
                var desc = '두분의 궁합지수는!';
                var desckwan;
                var female = document.getElementById('f-m-f').textContent;
                var male = document.getElementById('f-m-m').textContent;
                if (female === 'cat' && male === 'cat') {
                    document.getElementById('flex-middle').innerHTML = '100%';
                } else if (female === 'cat' && male === 'dino') {
                    document.getElementById('flex-middle').innerHTML = '60%';
                } else if (female === 'cat' && male === 'fox') {
                    document.getElementById('flex-middle').innerHTML = '90%';
                } else if (female === 'cat' && male === 'monkey') {
                    document.getElementById('flex-middle').innerHTML = '70%';
                } else if (female === 'cat' && male === 'horse') {
                    document.getElementById('flex-middle').innerHTML = '80%';
                } //cat
                else if (female === 'puppy' && male === 'horse') {
                    document.getElementById('flex-middle').innerHTML = '80%';
                } else if (female === 'puppy' && male === 'cat') {
                    document.getElementById('flex-middle').innerHTML = '60%';
                } else if (female === 'puppy' && male === 'dino') {
                    document.getElementById('flex-middle').innerHTML = '90%';
                } else if (female === 'puppy' && male === 'monkey') {
                    document.getElementById('flex-middle').innerHTML = '100%';
                } else if (female === 'puppy' && male === 'fox') {
                    document.getElementById('flex-middle').innerHTML = '70%';
                } //puppy
                else if (female === 'deer' && male === 'horse') {
                    document.getElementById('flex-middle').innerHTML = '100%';
                } else if (female === 'deer' && male === 'cat') {
                    document.getElementById('flex-middle').innerHTML = '80%';
                } else if (female === 'deer' && male === 'dino') {
                    document.getElementById('flex-middle').innerHTML = '90%';
                } else if (female === 'deer' && male === 'monkey') {
                    document.getElementById('flex-middle').innerHTML = '60%';
                } else if (female === 'deer' && male === 'fox') {
                    document.getElementById('flex-middle').innerHTML = '70%';
                } //deer
                else if (female === 'fox' && male === 'horse') {
                    document.getElementById('flex-middle').innerHTML = '70%';
                } else if (female === 'fox' && male === 'cat') {
                    document.getElementById('flex-middle').innerHTML = '90%';
                } else if (female === 'fox' && male === 'dino') {
                    document.getElementById('flex-middle').innerHTML = '80%';
                } else if (female === 'fox' && male === 'monkey') {
                    document.getElementById('flex-middle').innerHTML = '60%';
                } else if (female === 'fox' && male === 'fox') {
                    document.getElementById('flex-middle').innerHTML = '100%';
                } //fox
                else if (female === 'rabbit' && male === 'horse') {
                    document.getElementById('flex-middle').innerHTML = '90%';
                } else if (female === 'rabbit' && male === 'cat') {
                    document.getElementById('flex-middle').innerHTML = '70%';
                } else if (female === 'rabbit' && male === 'dino') {
                    document.getElementById('flex-middle').innerHTML = '80%';
                } else if (female === 'rabbit' && male === 'monkey') {
                    document.getElementById('flex-middle').innerHTML = '100%';
                } else if (female === 'rabbit' && male === 'fox') {
                    document.getElementById('flex-middle').innerHTML = '60%';
                } //rabbit
                else if (female === 'desert fox' && male === 'horse') {
                    document.getElementById('flex-middle').innerHTML = '70%';
                } else if (female === 'desert fox' && male === 'cat') {
                    document.getElementById('flex-middle').innerHTML = '90%';
                } else if (female === 'desert fox' && male === 'dino') {
                    document.getElementById('flex-middle').innerHTML = '60%';
                } else if (female === 'desert fox' && male === 'monkey') {
                    document.getElementById('flex-middle').innerHTML = '80%';
                } else if (female === 'desert fox' && male === 'fox') {
                    document.getElementById('flex-middle').innerHTML = '100%';
                } //desertfox
                else {
                    document.getElementById('flex-middle').innerHTML = '알수없음';
                }

                var flexm = document.getElementById('flex-middle').textContent;
                if (flexm === '60%') {
                    desckwan = '그럭저럭 잘 어울리는 한쌍이네요';
                } else if (flexm === '70%') {
                    desckwan = '상당히 잘어울리네요!';
                } else if (flexm === '80%') {
                    desckwan = '누가봐도 정말 잘어울리고 같이 있는게 보기 좋네요!';
                } else if (flexm === '90%') {
                    desckwan = '전생에 연인이셨던거 같네요! 궁합이 너무 잘맞네요!';
                } else if (flexm === '100%') {
                    desckwan = '하늘이 내려준 인연이네요! 절대 떨어지시면 안되겠어요!';
                } else {
                    desckwan = '알수없음';
                }
                $('#flex-desc').html(desc);
                $('#flex-desckwan').html(desckwan);
            }
        </script>
        <!-- Go to www.addthis.com/dashboard to customize your tools -->
        <script
            type="text/javascript"
            src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5f266097864de941"
        ></script>
    </body>
</html>